
&НаКлиенте
Процедура Команда1(Команда)
	ЗаполнитьДеревоФич("");
КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьДеревоФич(КаталогФич)
	ПодготовитьФичи();
	
	НачатьПоискФайлов(Новый ОписаниеОповещения("ЗаполнитьДеревоФичЗавершение", ЭтотОбъект, КаталогФич), КаталогФич, "*.feature", Истина);
КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьДеревоФичЗавершение(НайденныеФайлы, ДополнительныеПараметры) Экспорт
	Если ЗначениеЗаполнено(НайденныеФайлы) Тогда
		Для Каждого НайденныйФайл Из НайденныеФайлы Цикл
			ДобавитьОписаниеФичи(Параметры.Фичи, НайденныйФайл);
			ОпределитьРодительскиеКаталогиФичи(Параметры.Фичи, НайденныйФайл);
		КонецЦикла;
	КонецЕсли;	
КонецПроцедуры

&НаКлиенте
Процедура ПодготовитьФичи()
	Параметры.Фичи = Новый Структура;
КонецПроцедуры

&НаКлиенте
Процедура ДобавитьОписаниеФичи(Фичи, НайденныйФайл)
	Фичи.Вставить("Имя", НайденныйФайл.Имя);
	Фичи.Вставить("ИмяБезРасширения", НайденныйФайл.ИмяБезРасширения);
	Фичи.Вставить("ПолноеИмя", НайденныйФайл.ПолноеИмя);
	Фичи.Вставить("Путь", НайденныйФайл.Путь);
	Фичи.Вставить("Расширение", НайденныйФайл.Расширение);
	Фичи.Вставить("Родитель", Неопределено);
КонецПроцедуры

&НаКлиенте
Процедура ОпределитьРодительскиеКаталогиФичи(Фичи, НайденныйФайл)
	//НайденныйФайл.Путь
	             КаталогФич стр заменить
КонецПроцедуры
